(function(){var t,e;t=function(){function t(t,e){var o,i;if(this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",links:!0,mock:!1,useHttp:!1},"object"==typeof t)for(o in t)i=t[o],this.options[o]=i;this.context=null!=e?e:this,this.unique=this._genKey()}return t.prototype.hasNext=function(){return"string"==typeof this.context.nextUrl&&this.context.nextUrl.length>0},t.prototype.next=function(){return this.hasNext()?this.run(this.context.nextUrl):!1},t.prototype.run=function(e){var o,i,n;if("string"!=typeof this.options.clientId&&"string"!=typeof this.options.accessToken)throw new Error("Missing clientId or accessToken.");if("string"!=typeof this.options.accessToken&&"string"!=typeof this.options.clientId)throw new Error("Missing clientId or accessToken.");return null!=this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),"undefined"!=typeof document&&null!==document&&(n=document.createElement("script"),n.id="instafeed-fetcher",n.src=e||this._buildUrl(),o=document.getElementsByTagName("head"),o[0].appendChild(n),i="instafeedCache"+this.unique,window[i]=new t(this.options,this),window[i].unique=this.unique),!0},t.prototype.parse=function(t){var e,o,i,n,s,r,a,p,c,l,h,u,d,f,m,g,y,w,k,b,_,I;if("object"!=typeof t){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(200!==t.meta.code){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,t.meta.error_message),!1;throw new Error("Error from Instagram: "+t.meta.error_message)}if(0===t.data.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}if(null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,t),this.context.nextUrl="",null!=t.pagination&&(this.context.nextUrl=t.pagination.next_url),"none"!==this.options.sortBy)switch(f="random"===this.options.sortBy?["","random"]:this.options.sortBy.split("-"),d="least"===f[0],f[1]){case"random":t.data.sort(function(){return.5-Math.random()});break;case"recent":t.data=this._sortBy(t.data,"created_time",d);break;case"liked":t.data=this._sortBy(t.data,"likes.count",d);break;case"commented":t.data=this._sortBy(t.data,"comments.count",d);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}if("undefined"!=typeof document&&null!==document&&this.options.mock===!1){if(p=t.data,null!=this.options.limit&&p.length>this.options.limit&&(p=p.slice(0,this.options.limit+1||9e9)),o=document.createDocumentFragment(),null!=this.options.filter&&"function"==typeof this.options.filter&&(p=this._filter(p,this.options.filter)),null!=this.options.template&&"string"==typeof this.options.template){for(n="",r="",l="",m=document.createElement("div"),g=0,k=p.length;k>g;g++)s=p[g],a=s.images[this.options.resolution].url,this.options.useHttp||(a=a.replace("http://","//")),r=this._makeTemplate(this.options.template,{model:s,id:s.id,link:s.link,image:a,caption:this._getObjectProperty(s,"caption.text"),likes:s.likes.count,comments:s.comments.count,location:this._getObjectProperty(s,"location.name")}),n+=r;for(m.innerHTML=n,I=[].slice.call(m.childNodes),y=0,b=I.length;b>y;y++)u=I[y],o.appendChild(u)}else for(w=0,_=p.length;_>w;w++)s=p[w],c=document.createElement("img"),a=s.images[this.options.resolution].url,this.options.useHttp||(a=a.replace("http://","//")),c.src=a,this.options.links===!0?(e=document.createElement("a"),e.href=s.link,e.appendChild(c),o.appendChild(e)):o.appendChild(c);document.getElementById(this.options.target).appendChild(o),i=document.getElementsByTagName("head")[0],i.removeChild(document.getElementById("instafeed-fetcher")),h="instafeedCache"+this.unique,window[h]=void 0;try{delete window[h]}catch(v){}}return null!=this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this),!0},t.prototype._buildUrl=function(){var t,e,o;switch(t="https://api.instagram.com/v1",this.options.get){case"popular":e="media/popular";break;case"tagged":if("string"!=typeof this.options.tagName)throw new Error("No tag name specified. Use the 'tagName' option.");e="tags/"+this.options.tagName+"/media/recent";break;case"location":if("number"!=typeof this.options.locationId)throw new Error("No location specified. Use the 'locationId' option.");e="locations/"+this.options.locationId+"/media/recent";break;case"user":if("number"!=typeof this.options.userId)throw new Error("No user specified. Use the 'userId' option.");if("string"!=typeof this.options.accessToken)throw new Error("No access token. Use the 'accessToken' option.");e="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return o=""+t+"/"+e,o+=null!=this.options.accessToken?"?access_token="+this.options.accessToken:"?client_id="+this.options.clientId,null!=this.options.limit&&(o+="&count="+this.options.limit),o+="&callback=instafeedCache"+this.unique+".parse"},t.prototype._genKey=function(){var t;return t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},""+t()+t()+t()+t()},t.prototype._makeTemplate=function(t,e){var o,i,n,s,r;for(i=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,o=t;i.test(o);)n=o.match(i)[1],s=null!=(r=this._getObjectProperty(e,n))?r:"",o=o.replace(i,""+s);return o},t.prototype._getObjectProperty=function(t,e){var o,i;for(e=e.replace(/\[(\w+)\]/g,".$1"),i=e.split(".");i.length;){if(o=i.shift(),!(null!=t&&o in t))return null;t=t[o]}return t},t.prototype._sortBy=function(t,e,o){var i;return i=function(t,i){var n,s;return n=this._getObjectProperty(t,e),s=this._getObjectProperty(i,e),o?n>s?1:-1:s>n?1:-1},t.sort(i.bind(this)),t},t.prototype._filter=function(t,e){var o,i,n,s,r;for(o=[],n=function(t){return e(t)?o.push(t):void 0},s=0,r=t.length;r>s;s++)i=t[s],n(i);return o},t}(),e="undefined"!=typeof exports&&null!==exports?exports:window,e.Instafeed=t}).call(this);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluc3RhZmVlZC5taW4uanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInRoaXMiLCJvcHRpb25zIiwidGFyZ2V0IiwiZ2V0IiwicmVzb2x1dGlvbiIsInNvcnRCeSIsImxpbmtzIiwibW9jayIsInVzZUh0dHAiLCJjb250ZXh0IiwidW5pcXVlIiwiX2dlbktleSIsInByb3RvdHlwZSIsImhhc05leHQiLCJuZXh0VXJsIiwibGVuZ3RoIiwibmV4dCIsInJ1biIsImkiLCJjbGllbnRJZCIsImFjY2Vzc1Rva2VuIiwiRXJyb3IiLCJiZWZvcmUiLCJjYWxsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJzcmMiLCJfYnVpbGRVcmwiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImFwcGVuZENoaWxkIiwid2luZG93IiwicGFyc2UiLCJzIiwibyIsInUiLCJhIiwiZiIsImwiLCJjIiwiaCIsInAiLCJkIiwidiIsIm0iLCJnIiwieSIsImIiLCJ3IiwiRSIsIlMiLCJlcnJvciIsIm1ldGEiLCJjb2RlIiwiZXJyb3JfbWVzc2FnZSIsImRhdGEiLCJzdWNjZXNzIiwicGFnaW5hdGlvbiIsIm5leHRfdXJsIiwic3BsaXQiLCJzb3J0IiwiTWF0aCIsInJhbmRvbSIsIl9zb3J0QnkiLCJsaW1pdCIsInNsaWNlIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImZpbHRlciIsIl9maWx0ZXIiLCJ0ZW1wbGF0ZSIsImltYWdlcyIsInVybCIsInJlcGxhY2UiLCJfbWFrZVRlbXBsYXRlIiwibW9kZWwiLCJsaW5rIiwiaW1hZ2UiLCJjYXB0aW9uIiwiX2dldE9iamVjdFByb3BlcnR5IiwibGlrZXMiLCJjb3VudCIsImNvbW1lbnRzIiwibG9jYXRpb24iLCJpbm5lckhUTUwiLCJjaGlsZE5vZGVzIiwiaHJlZiIsImdldEVsZW1lbnRCeUlkIiwicmVtb3ZlQ2hpbGQiLCJ4IiwiYWZ0ZXIiLCJ0YWdOYW1lIiwibG9jYXRpb25JZCIsInVzZXJJZCIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwidGVzdCIsIm1hdGNoIiwic2hpZnQiLCJiaW5kIiwicHVzaCIsImV4cG9ydHMiLCJJbnN0YWZlZWQiXSwibWFwcGluZ3MiOiJDQUNBLFdBQ0ksR0FBSUEsR0FBRUMsQ0FDTkQsR0FBRSxXQUNFLFFBQVNBLEdBQUVBLEVBQUVDLEdBQ1QsR0FBSUMsR0FBRUMsQ0FTRixJQVJKQyxLQUFLQyxTQUNEQyxPQUFPLFlBQ1BDLElBQUksVUFDSkMsV0FBVyxZQUNYQyxPQUFPLE9BQ1BDLE9BQU0sRUFDTkMsTUFBSyxFQUNMQyxTQUFRLEdBQ0ssZ0JBQUhaLEdBQVksSUFBSUUsSUFBS0YsR0FBRUcsRUFBRUgsRUFBRUUsR0FBR0UsS0FBS0MsUUFBUUgsR0FBR0MsQ0FDeERDLE1BQUtTLFFBQVcsTUFBSFosRUFBUUEsRUFBRUcsS0FBS0EsS0FBS1UsT0FBT1YsS0FBS1csVUFBVSxNQUFPZixHQUFFZ0IsVUFBVUMsUUFBUSxXQUFXLE1BQW9DLGdCQUF0QmIsTUFBS1MsUUFBUUssU0FBbUJkLEtBQUtTLFFBQVFLLFFBQVFDLE9BQU8sR0FBR25CLEVBQUVnQixVQUFVSSxLQUFLLFdBQVcsTUFBT2hCLE1BQUthLFVBQVViLEtBQUtpQixJQUFJakIsS0FBS1MsUUFBUUssVUFBUyxHQUFJbEIsRUFBRWdCLFVBQVVLLElBQUksU0FBU3BCLEdBQUcsR0FBSUMsR0FBRUMsRUFBRW1CLENBQUUsSUFBaUMsZ0JBQXZCbEIsTUFBS0MsUUFBUWtCLFVBQXFELGdCQUExQm5CLE1BQUtDLFFBQVFtQixZQUFzQixLQUFNLElBQUlDLE9BQU0sbUNBQW9DLElBQW9DLGdCQUExQnJCLE1BQUtDLFFBQVFtQixhQUFxRCxnQkFBdkJwQixNQUFLQyxRQUFRa0IsU0FBbUIsS0FBTSxJQUFJRSxPQUFNLG1DQUFvQyxPQUE0QixPQUFyQnJCLEtBQUtDLFFBQVFxQixRQUEwQyxrQkFBckJ0QixNQUFLQyxRQUFRcUIsUUFBb0J0QixLQUFLQyxRQUFRcUIsT0FBT0MsS0FBS3ZCLE1BQXVCLG1CQUFWd0IsV0FBa0MsT0FBWEEs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RSxFQUFFRixFQUFFOEQsTUFBTSxLQUFXNUQsRUFBRWdCLFFBQU8sQ0FBYSxHQUFaakIsRUFBRUMsRUFBRWtHLFVBQWdCLE1BQUhyRyxHQUFTRSxJQUFLRixJQUFHLE1BQU8sS0FBS0EsR0FBRUEsRUFBRUUsR0FBRyxNQUFPRixJQUFHQSxFQUFFZ0IsVUFBVW1ELFFBQVEsU0FBU25FLEVBQUVDLEVBQUVDLEdBQUcsR0FBSUMsRUFBRSxPQUFPQSxHQUFFLFNBQVNILEVBQUVHLEdBQUcsR0FBSW1CLEdBQUVlLENBQUUsT0FBT2YsR0FBRWxCLEtBQUs4RSxtQkFBbUJsRixFQUFFQyxHQUFHb0MsRUFBRWpDLEtBQUs4RSxtQkFBbUIvRSxFQUFFRixHQUFHQyxFQUFFb0IsRUFBRWUsRUFBRSxFQUFFLEdBQUtBLEVBQUZmLEVBQUksRUFBRSxJQUFJdEIsRUFBRWdFLEtBQUs3RCxFQUFFbUcsS0FBS2xHLE9BQU9KLEdBQUdBLEVBQUVnQixVQUFVd0QsUUFBUSxTQUFTeEUsRUFBRUMsR0FBRyxHQUFJQyxHQUFFQyxFQUFFbUIsRUFBRWUsRUFBRUMsQ0FBK0MsS0FBN0NwQyxLQUFLb0IsRUFBRSxTQUFTdEIsR0FBRyxNQUFHQyxHQUFFRCxHQUFVRSxFQUFFcUcsS0FBS3ZHLEdBQXRCLFFBQThCcUMsRUFBRSxFQUFFQyxFQUFFdEMsRUFBRW1CLE9BQVNtQixFQUFGRCxFQUFJQSxJQUFJbEMsRUFBRUgsRUFBRXFDLEdBQUdmLEVBQUVuQixFQUFHLE9BQU9ELElBQUdGLEtBQUtDLEVBQWtCLG1CQUFUdUcsVUFBZ0MsT0FBVkEsUUFBZUEsUUFBUXJFLE9BQU9sQyxFQUFFd0csVUFBVXpHLElBQUkyQixLQUFLdkIiLCJmaWxlIjoiaW5zdGFmZWVkLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4zLjNcbihmdW5jdGlvbigpe1xuICAgIHZhciBlLHQ7XG4gICAgZT1mdW5jdGlvbigpe1xuICAgICAgICBmdW5jdGlvbiBlKGUsdCl7XG4gICAgICAgICAgICB2YXIgbixyO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zPXtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6XCJpbnN0YWZlZWRcIixcbiAgICAgICAgICAgICAgICBnZXQ6XCJwb3B1bGFyXCIsXG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbjpcInRodW1ibmFpbFwiLFxuICAgICAgICAgICAgICAgIHNvcnRCeTpcIm5vbmVcIixcbiAgICAgICAgICAgICAgICBsaW5rczohMCxcbiAgICAgICAgICAgICAgICBtb2NrOiExLFxuICAgICAgICAgICAgICAgIHVzZUh0dHA6ITF9O1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBlPT1cIm9iamVjdFwiKWZvcihuIGluIGUpcj1lW25dLHRoaXMub3B0aW9uc1tuXT1yO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dD10IT1udWxsP3Q6dGhpcyx0aGlzLnVuaXF1ZT10aGlzLl9nZW5LZXkoKX1yZXR1cm4gZS5wcm90b3R5cGUuaGFzTmV4dD1mdW5jdGlvbigpe3JldHVybiB0eXBlb2YgdGhpcy5jb250ZXh0Lm5leHRVcmw9PVwic3RyaW5nXCImJnRoaXMuY29udGV4dC5uZXh0VXJsLmxlbmd0aD4wfSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzTmV4dCgpP3RoaXMucnVuKHRoaXMuY29udGV4dC5uZXh0VXJsKTohMX0sZS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKHQpe3ZhciBuLHIsaTtpZih0eXBlb2YgdGhpcy5vcHRpb25zLmNsaWVudElkIT1cInN0cmluZ1wiJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuIT1cInN0cmluZ1wiKXRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgY2xpZW50SWQgb3IgYWNjZXNzVG9rZW4uXCIpO2lmKHR5cGVvZiB0aGlzLm9wdGlvbnMuYWNjZXNzVG9rZW4hPVwic3RyaW5nXCImJnR5cGVvZiB0aGlzLm9wdGlvbnMuY2xpZW50SWQhPVwic3RyaW5nXCIpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjbGllbnRJZCBvciBhY2Nlc3NUb2tlbi5cIik7cmV0dXJuIHRoaXMub3B0aW9ucy5iZWZvcmUhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuYmVmb3JlPT1cImZ1bmN0aW9uXCImJnRoaXMub3B0aW9ucy5iZWZvcmUuY2FsbCh0aGlzKSx0eXBlb2YgZG9jdW1lbnQhPVwidW5kZWZpbmVkXCImJmRvY3VtZW50IT09bnVsbCYmKGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxpLmlkPVwiaW5zdGFmZWVkLWZldGNoZXJcIixpLnNyYz10fHx0aGlzLl9idWlsZFVybCgpLG49ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpLG5bMF0uYXBwZW5kQ2hpbGQoaSkscj1cImluc3RhZmVlZENhY2hlXCIrdGhpcy51bmlxdWUsd2luZG93W3JdPW5ldyBlKHRoaXMub3B0aW9ucyx0aGlzKSx3aW5kb3dbcl0udW5pcXVlPXRoaXMudW5pcXVlKSwhMH0sZS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGkscyxvLHUsYSxmLGwsYyxoLHAsZCx2LG0sZyx5LGIsdyxFLFM7aWYodHlwZW9mIGUhPVwib2JqZWN0XCIpe2lmKHRoaXMub3B0aW9ucy5lcnJvciE9bnVsbCYmdHlwZW9mIHRoaXMub3B0aW9ucy5lcnJvcj09XCJmdW5jdGlvblwiKXJldHVybiB0aGlzLm9wdGlvbnMuZXJyb3IuY2FsbCh0aGlzLFwiSW52YWxpZCBKU09OIGRhdGFcIiksITE7dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBKU09OIHJlc3BvbnNlXCIpfWlmKGUubWV0YS5jb2RlIT09MjAwKXtpZih0aGlzLm9wdGlvbnMuZXJyb3IhPW51bGwmJnR5cGVvZiB0aGlzLm9wdGlvbnMuZXJyb3I9PVwiZnVuY3Rpb25cIilyZXR1cm4gdGhpcy5vcHRpb25zLmVycm9yLmNhbGwodGhpcyxlLm1ldGEuZXJyb3JfbWVzc2FnZSksITE7dGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgZnJvbSBJbnN0YWdyYW06IFwiK2UubWV0YS5lcnJvcl9tZXNzYWdlKX1pZihlLmRhdGEubGVuZ3RoPT09MCl7aWYodGhpcy5vcHRpb25zLmVycm9yIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmVycm9yPT1cImZ1bmN0aW9uXCIpcmV0dXJuIHRoaXMub3B0aW9ucy5lcnJvci5jYWxsKHRoaXMsXCJObyBpbWFnZXMgd2VyZSByZXR1cm5lZCBmcm9tIEluc3RhZ3JhbVwiKSwhMTt0aHJvdyBuZXcgRXJyb3IoXCJObyBpbWFnZXMgd2VyZSByZXR1cm5lZCBmcm9tIEluc3RhZ3JhbVwiKX10aGlzLm9wdGlvbnMuc3VjY2VzcyE9bnVsbCYmdHlwZW9mIHRoaXMub3B0aW9ucy5zdWNjZXNzPT1cImZ1bmN0aW9uXCImJnRoaXMub3B0aW9ucy5zdWNjZXNzLmNhbGwodGhpcyxlKSx0aGlzLmNvbnRleHQubmV4dFVybD1cIlwiLGUucGFnaW5hdGlvbiE9bnVsbCYmKHRoaXMuY29udGV4dC5uZXh0VXJsPWUucGFnaW5hdGlvbi5uZXh0X3VybCk7aWYodGhpcy5vcHRpb25zLnNvcnRCeSE9PVwibm9uZVwiKXt0aGlzLm9wdGlvbnMuc29ydEJ5PT09XCJyYW5kb21cIj9kPVtcIlwiLFwicmFuZG9tXCJdOmQ9dGhpcy5vcHRpb25zLnNvcnRCeS5zcGxpdChcIi1cIikscD1kWzBdPT09XCJsZWFzdFwiPyEwOiExO3N3aXRjaChkWzFdKXtjYXNlXCJyYW5kb21cIjplLmRhdGEuc29ydChmdW5jdGlvbigpe3JldHVybi41LU1hdGgucmFuZG9tKCl9KTticmVhaztjYXNlXCJyZWNlbnRcIjplLmRhdGE9dGhpcy5fc29ydEJ5KGUuZGF0YSxcImNyZWF0ZWRfdGltZVwiLHApO2JyZWFrO2Nhc2VcImxpa2VkXCI6ZS5kYXRhPXRoaXMuX3NvcnRCeShlLmRhdGEsXCJsaWtlcy5jb3VudFwiLHApO2JyZWFrO2Nhc2VcImNvbW1lbnRlZFwiOmUuZGF0YT10aGlzLl9zb3J0QnkoZS5kYXRhLFwiY29tbWVudHMuY291bnRcIixwKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3B0aW9uIGZvciBzb3J0Qnk6ICdcIit0aGlzLm9wdGlvbnMuc29ydEJ5K1wiJy5cIil9fWlmKHR5cGVvZiBkb2N1bWVudCE9XCJ1bmRlZmluZWRcIiYmZG9jdW1lbnQhPT1udWxsJiZ0aGlzLm9wdGlvbnMubW9jaz09PSExKXthPWUuZGF0YSx0aGlzLm9wdGlvbnMubGltaXQhPW51bGwmJmEubGVuZ3RoPnRoaXMub3B0aW9ucy5saW1pdCYmKGE9YS5zbGljZSgwLHRoaXMub3B0aW9ucy5saW1pdCsxfHw5ZTkpKSxuPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSx0aGlzLm9wdGlvbnMuZmlsdGVyIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmZpbHRlcj09XCJmdW5jdGlvblwiJiYoYT10aGlzLl9maWx0ZXIoYSx0aGlzLm9wdGlvbnMuZmlsdGVyKSk7aWYodGhpcy5vcHRpb25zLnRlbXBsYXRlIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLnRlbXBsYXRlPT1cInN0cmluZ1wiKXtpPVwiXCIsbz1cIlwiLGw9XCJcIix2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKG09MCxiPWEubGVuZ3RoO208YjttKyspcz1hW21dLHU9cy5pbWFnZXNbdGhpcy5vcHRpb25zLnJlc29sdXRpb25dLnVybCx0aGlzLm9wdGlvbnMudXNlSHR0cHx8KHU9dS5yZXBsYWNlKFwiaHR0cDovL1wiLFwiLy9cIikpLG89dGhpcy5fbWFrZVRlbXBsYXRlKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSx7bW9kZWw6cyxpZDpzLmlkLGxpbms6cy5saW5rLGltYWdlOnUsY2FwdGlvbjp0aGlzLl9nZXRPYmplY3RQcm9wZXJ0eShzLFwiY2FwdGlvbi50ZXh0XCIpLGxpa2VzOnMubGlrZXMuY291bnQsY29tbWVudHM6cy5jb21tZW50cy5jb3VudCxsb2NhdGlvbjp0aGlzLl9nZXRPYmplY3RQcm9wZXJ0eShzLFwibG9jYXRpb24ubmFtZVwiKX0pLGkrPW87di5pbm5lckhUTUw9aSxTPVtdLnNsaWNlLmNhbGwodi5jaGlsZE5vZGVzKTtmb3IoZz0wLHc9Uy5sZW5ndGg7Zzx3O2crKyloPVNbZ10sbi5hcHBlbmRDaGlsZChoKX1lbHNlIGZvcih5PTAsRT1hLmxlbmd0aDt5PEU7eSsrKXM9YVt5XSxmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksdT1zLmltYWdlc1t0aGlzLm9wdGlvbnMucmVzb2x1dGlvbl0udXJsLHRoaXMub3B0aW9ucy51c2VIdHRwfHwodT11LnJlcGxhY2UoXCJodHRwOi8vXCIsXCIvL1wiKSksZi5zcmM9dSx0aGlzLm9wdGlvbnMubGlua3M9PT0hMD8odD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSx0LmhyZWY9cy5saW5rLHQuYXBwZW5kQ2hpbGQoZiksbi5hcHBlbmRDaGlsZCh0KSk6bi5hcHBlbmRDaGlsZChmKTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLm9wdGlvbnMudGFyZ2V0KS5hcHBlbmRDaGlsZChuKSxyPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSxyLnJlbW92ZUNoaWxkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5zdGFmZWVkLWZldGNoZXJcIikpLGM9XCJpbnN0YWZlZWRDYWNoZVwiK3RoaXMudW5pcXVlLHdpbmRvd1tjXT12b2lkIDA7dHJ5e2RlbGV0ZSB3aW5kb3dbY119Y2F0Y2goeCl7fX1yZXR1cm4gdGhpcy5vcHRpb25zLmFmdGVyIT1udWxsJiZ0eXBlb2YgdGhpcy5vcHRpb25zLmFmdGVyPT1cImZ1bmN0aW9uXCImJnRoaXMub3B0aW9ucy5hZnRlci5jYWxsKHRoaXMpLCEwfSxlLnByb3RvdHlwZS5fYnVpbGRVcmw9ZnVuY3Rpb24oKXt2YXIgZSx0LG47ZT1cImh0dHBzOi8vYXBpLmluc3RhZ3JhbS5jb20vdjFcIjtzd2l0Y2godGhpcy5vcHRpb25zLmdldCl7Y2FzZVwicG9wdWxhclwiOnQ9XCJtZWRpYS9wb3B1bGFyXCI7YnJlYWs7Y2FzZVwidGFnZ2VkXCI6aWYodHlwZW9mIHRoaXMub3B0aW9ucy50YWdOYW1lIT1cInN0cmluZ1wiKXRocm93IG5ldyBFcnJvcihcIk5vIHRhZyBuYW1lIHNwZWNpZmllZC4gVXNlIHRoZSAndGFnTmFtZScgb3B0aW9uLlwiKTt0PVwidGFncy9cIit0aGlzLm9wdGlvbnMudGFnTmFtZStcIi9tZWRpYS9yZWNlbnRcIjticmVhaztjYXNlXCJsb2NhdGlvblwiOmlmKHR5cGVvZiB0aGlzLm9wdGlvbnMubG9jYXRpb25JZCE9XCJudW1iZXJcIil0aHJvdyBuZXcgRXJyb3IoXCJObyBsb2NhdGlvbiBzcGVjaWZpZWQuIFVzZSB0aGUgJ2xvY2F0aW9uSWQnIG9wdGlvbi5cIik7dD1cImxvY2F0aW9ucy9cIit0aGlzLm9wdGlvbnMubG9jYXRpb25JZCtcIi9tZWRpYS9yZWNlbnRcIjticmVhaztjYXNlXCJ1c2VyXCI6aWYodHlwZW9mIHRoaXMub3B0aW9ucy51c2VySWQhPVwibnVtYmVyXCIpdGhyb3cgbmV3IEVycm9yKFwiTm8gdXNlciBzcGVjaWZpZWQuIFVzZSB0aGUgJ3VzZXJJZCcgb3B0aW9uLlwiKTtpZih0eXBlb2YgdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuIT1cInN0cmluZ1wiKXRocm93IG5ldyBFcnJvcihcIk5vIGFjY2VzcyB0b2tlbi4gVXNlIHRoZSAnYWNjZXNzVG9rZW4nIG9wdGlvbi5cIik7dD1cInVzZXJzL1wiK3RoaXMub3B0aW9ucy51c2VySWQrXCIvbWVkaWEvcmVjZW50XCI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wdGlvbiBmb3IgZ2V0OiAnXCIrdGhpcy5vcHRpb25zLmdldCtcIicuXCIpfXJldHVybiBuPVwiXCIrZStcIi9cIit0LHRoaXMub3B0aW9ucy5hY2Nlc3NUb2tlbiE9bnVsbD9uKz1cIj9hY2Nlc3NfdG9rZW49XCIrdGhpcy5vcHRpb25zLmFjY2Vzc1Rva2VuOm4rPVwiP2NsaWVudF9pZD1cIit0aGlzLm9wdGlvbnMuY2xpZW50SWQsdGhpcy5vcHRpb25zLmxpbWl0IT1udWxsJiYobis9XCImY291bnQ9XCIrdGhpcy5vcHRpb25zLmxpbWl0KSxuKz1cIiZjYWxsYmFjaz1pbnN0YWZlZWRDYWNoZVwiK3RoaXMudW5pcXVlK1wiLnBhcnNlXCIsbn0sZS5wcm90b3R5cGUuX2dlbktleT1mdW5jdGlvbigpe3ZhciBlO3JldHVybiBlPWZ1bmN0aW9uKCl7cmV0dXJuKCgxK01hdGgucmFuZG9tKCkpKjY1NTM2fDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSl9LFwiXCIrZSgpK2UoKStlKCkrZSgpfSxlLnByb3RvdHlwZS5fbWFrZVRlbXBsYXRlPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHMsbztyPS8oPzpcXHt7Mn0pKFtcXHdcXFtcXF1cXC5dKykoPzpcXH17Mn0pLyxuPWU7d2hpbGUoci50ZXN0KG4pKWk9bi5tYXRjaChyKVsxXSxzPShvPXRoaXMuX2dldE9iamVjdFByb3BlcnR5KHQsaSkpIT1udWxsP286XCJcIixuPW4ucmVwbGFjZShyLFwiXCIrcyk7cmV0dXJuIG59LGUucHJvdG90eXBlLl9nZXRPYmplY3RQcm9wZXJ0eT1mdW5jdGlvbihlLHQpe3ZhciBuLHI7dD10LnJlcGxhY2UoL1xcWyhcXHcrKVxcXS9nLFwiLiQxXCIpLHI9dC5zcGxpdChcIi5cIik7d2hpbGUoci5sZW5ndGgpe249ci5zaGlmdCgpO2lmKCEoZSE9bnVsbCYmbiBpbiBlKSlyZXR1cm4gbnVsbDtlPWVbbl19cmV0dXJuIGV9LGUucHJvdG90eXBlLl9zb3J0Qnk9ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiByPWZ1bmN0aW9uKGUscil7dmFyIGkscztyZXR1cm4gaT10aGlzLl9nZXRPYmplY3RQcm9wZXJ0eShlLHQpLHM9dGhpcy5fZ2V0T2JqZWN0UHJvcGVydHkocix0KSxuP2k+cz8xOi0xOmk8cz8xOi0xfSxlLnNvcnQoci5iaW5kKHRoaXMpKSxlfSxlLnByb3RvdHlwZS5fZmlsdGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHMsbztuPVtdLGk9ZnVuY3Rpb24oZSl7aWYodChlKSlyZXR1cm4gbi5wdXNoKGUpfTtmb3Iocz0wLG89ZS5sZW5ndGg7czxvO3MrKylyPWVbc10saShyKTtyZXR1cm4gbn0sZX0oKSx0PXR5cGVvZiBleHBvcnRzIT1cInVuZGVmaW5lZFwiJiZleHBvcnRzIT09bnVsbD9leHBvcnRzOndpbmRvdyx0Lkluc3RhZmVlZD1lfSkuY2FsbCh0aGlzKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
